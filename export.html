<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Export Your Prompt History ‚Äî prompt.gallery</title>
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=IBM+Plex+Mono:wght@400;500;600&family=Instrument+Sans:wght@400;500;600;700&display=swap" rel="stylesheet">
  <link rel="stylesheet" href="styles.css">
  <link rel="stylesheet" href="export.css">
</head>
<body>
  <div class="noise"></div>
  
  <header class="header">
    <nav class="main-nav">
      <div class="logo">
        <a href="index.html" class="logo-link">
          <span class="logo-icon">‚åò</span>
          <span class="logo-text">prompt.gallery</span>
        </a>
      </div>
      <div class="nav-links">
        <a href="index.html" class="nav-link">Prompts</a>
        <a href="showcases.html" class="nav-link">Showcases</a>
        <a href="export.html" class="nav-link active">Export</a>
      </div>
    </nav>
  </header>

  <main class="export-container">
    <!-- Progress Bar -->
    <div class="progress-bar">
      <div class="progress-step active" data-step="1">
        <div class="step-number">1</div>
        <div class="step-label">Security</div>
      </div>
      <div class="progress-line"></div>
      <div class="progress-step" data-step="2">
        <div class="step-number">2</div>
        <div class="step-label">Locate</div>
      </div>
      <div class="progress-line"></div>
      <div class="progress-step" data-step="3">
        <div class="step-number">3</div>
        <div class="step-label">Select</div>
      </div>
      <div class="progress-line"></div>
      <div class="progress-step" data-step="4">
        <div class="step-number">4</div>
        <div class="step-label">Review</div>
      </div>
      <div class="progress-line"></div>
      <div class="progress-step" data-step="5">
        <div class="step-number">5</div>
        <div class="step-label">Export</div>
      </div>
    </div>

    <!-- Step 1: Security Overview -->
    <section class="wizard-step active" data-step="1">
      <div class="step-header">
        <span class="step-icon">üîí</span>
        <h1>Your Privacy Comes First</h1>
        <p>Before we start, here's exactly what happens with your data.</p>
      </div>

      <div class="security-cards">
        <div class="security-card">
          <div class="security-icon">üíª</div>
          <h3>100% Client-Side Processing</h3>
          <p>Your chat history is processed entirely in your browser. Nothing is uploaded until you explicitly click "Submit".</p>
        </div>
        <div class="security-card">
          <div class="security-icon">üëÅÔ∏è</div>
          <h3>Preview Before Sharing</h3>
          <p>You'll see exactly what will be shared and can redact any sensitive information before exporting.</p>
        </div>
        <div class="security-card">
          <div class="security-icon">üóëÔ∏è</div>
          <h3>Nothing Stored Locally</h3>
          <p>We don't save anything to your computer. Close this tab and everything is gone.</p>
        </div>
      </div>

      <div class="security-checklist">
        <h3>What we'll access:</h3>
        <ul>
          <li>
            <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><polyline points="20 6 9 17 4 12"></polyline></svg>
            Your Cursor conversation history (the file you provide)
          </li>
          <li>
            <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><polyline points="20 6 9 17 4 12"></polyline></svg>
            Message timestamps and content
          </li>
        </ul>
        <h3>What we'll NEVER access:</h3>
        <ul class="never-list">
          <li>
            <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><line x1="18" y1="6" x2="6" y2="18"></line><line x1="6" y1="6" x2="18" y2="18"></line></svg>
            Your file system or other applications
          </li>
          <li>
            <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><line x1="18" y1="6" x2="6" y2="18"></line><line x1="6" y1="6" x2="18" y2="18"></line></svg>
            API keys, passwords, or credentials
          </li>
          <li>
            <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><line x1="18" y1="6" x2="6" y2="18"></line><line x1="6" y1="6" x2="18" y2="18"></line></svg>
            Anything you don't explicitly select
          </li>
        </ul>
      </div>

      <div class="step-actions">
        <button class="btn-primary" onclick="nextStep()">
          I Understand, Let's Continue
          <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><path d="M5 12h14M12 5l7 7-7 7"/></svg>
        </button>
      </div>
    </section>

    <!-- Step 2: Locate Cursor Data -->
    <section class="wizard-step" data-step="2">
      <div class="step-header">
        <span class="step-icon">üìÅ</span>
        <h1>Locate Your Chat History</h1>
        <p>Choose how you want to export your Cursor conversation.</p>
      </div>

      <div class="export-methods">
        <!-- Method 1: Cursor Export (Recommended) -->
        <div class="method-card recommended">
          <div class="method-badge">RECOMMENDED</div>
          <div class="method-header">
            <div class="method-icon">‚ú®</div>
            <h3>Export from Cursor</h3>
          </div>
          <p>Use Cursor's built-in export feature for the cleanest results.</p>
          <div class="method-steps">
            <div class="method-step">
              <span class="method-step-num">1</span>
              <span>Open your project in Cursor</span>
            </div>
            <div class="method-step">
              <span class="method-step-num">2</span>
              <span>Open the chat panel with your conversation</span>
            </div>
            <div class="method-step">
              <span class="method-step-num">3</span>
              <span>Click <kbd>‚åò</kbd> + <kbd>Shift</kbd> + <kbd>P</kbd> ‚Üí "Export Chat"</span>
            </div>
            <div class="method-step">
              <span class="method-step-num">4</span>
              <span>Save the JSON file and upload below</span>
            </div>
          </div>
        </div>

        <!-- Method 2: Manual Copy -->
        <div class="method-card">
          <div class="method-header">
            <div class="method-icon">üìã</div>
            <h3>Copy & Paste</h3>
          </div>
          <p>Manually select and copy your conversation from Cursor.</p>
          <div class="method-steps">
            <div class="method-step">
              <span class="method-step-num">1</span>
              <span>Open your conversation in Cursor</span>
            </div>
            <div class="method-step">
              <span class="method-step-num">2</span>
              <span>Select all messages (<kbd>‚åò</kbd> + <kbd>A</kbd> in chat)</span>
            </div>
            <div class="method-step">
              <span class="method-step-num">3</span>
              <span>Copy and paste into the text area below</span>
            </div>
          </div>
        </div>

        <!-- Method 3: Database Access (Advanced) -->
        <div class="method-card">
          <div class="method-header">
            <div class="method-icon">üîß</div>
            <h3>Database File (Advanced)</h3>
          </div>
          <p>For power users: directly access Cursor's local database.</p>
          <div class="path-selector">
            <label>Your OS:</label>
            <div class="os-tabs">
              <button class="os-tab active" data-os="mac">macOS</button>
              <button class="os-tab" data-os="windows">Windows</button>
              <button class="os-tab" data-os="linux">Linux</button>
            </div>
            <div class="path-display">
              <code id="dbPath">~/Library/Application Support/Cursor/User/workspaceStorage/</code>
              <button class="copy-path-btn" onclick="copyPath()">
                <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><rect x="9" y="9" width="13" height="13" rx="2"/><path d="M5 15H4a2 2 0 0 1-2-2V4a2 2 0 0 1 2-2h9a2 2 0 0 1 2 2v1"/></svg>
              </button>
            </div>
          </div>
        </div>
      </div>

      <!-- Upload Zone -->
      <div class="upload-zone" id="uploadZone">
        <input type="file" id="fileInput" accept=".json,.sqlite,.db,.txt" hidden>
        <div class="upload-icon">
          <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
            <path d="M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4"/>
            <polyline points="17 8 12 3 7 8"/>
            <line x1="12" y1="3" x2="12" y2="15"/>
          </svg>
        </div>
        <h3>Drop your file here</h3>
        <p>or click to browse ‚Ä¢ JSON, SQLite, or TXT</p>
        <div class="upload-status" id="uploadStatus"></div>
      </div>

      <!-- Or: Paste Area -->
      <div class="paste-section">
        <div class="divider">
          <span>OR</span>
        </div>
        <h3>Paste your conversation</h3>
        <textarea id="pasteArea" placeholder="Paste your copied conversation here...

Example format:
USER: How do I build a rate limiter?

ASSISTANT: I'll help you build a rate limiter...

USER: Can you add Redis support?

..."></textarea>
      </div>

      <div class="step-actions">
        <button class="btn-secondary" onclick="prevStep()">
          <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><path d="M19 12H5M12 19l-7-7 7-7"/></svg>
          Back
        </button>
        <button class="btn-primary" onclick="processInput()" id="continueBtn" disabled>
          Continue to Selection
          <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><path d="M5 12h14M12 5l7 7-7 7"/></svg>
        </button>
      </div>
    </section>

    <!-- Step 3: Select Conversation -->
    <section class="wizard-step" data-step="3">
      <div class="step-header">
        <span class="step-icon">üí¨</span>
        <h1>Select Your Conversation</h1>
        <p>Choose which messages to include in your showcase.</p>
      </div>

      <div class="conversation-selector">
        <div class="selector-toolbar">
          <div class="selector-info">
            <span id="selectedCount">0</span> of <span id="totalCount">0</span> messages selected
          </div>
          <div class="selector-actions">
            <button class="toolbar-btn" onclick="selectAll()">Select All</button>
            <button class="toolbar-btn" onclick="deselectAll()">Deselect All</button>
          </div>
        </div>

        <div class="messages-list" id="messagesList">
          <!-- Messages will be populated by JS -->
          <div class="empty-state">
            <p>No conversation loaded yet. Go back and upload or paste your chat history.</p>
          </div>
        </div>
      </div>

      <div class="step-actions">
        <button class="btn-secondary" onclick="prevStep()">
          <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><path d="M19 12H5M12 19l-7-7 7-7"/></svg>
          Back
        </button>
        <button class="btn-primary" onclick="nextStep()" id="reviewBtn" disabled>
          Review & Redact
          <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><path d="M5 12h14M12 5l7 7-7 7"/></svg>
        </button>
      </div>
    </section>

    <!-- Step 4: Review & Redact -->
    <section class="wizard-step" data-step="4">
      <div class="step-header">
        <span class="step-icon">üîç</span>
        <h1>Review & Redact Sensitive Info</h1>
        <p>Click on any text to redact it. Redacted content will appear as [REDACTED].</p>
      </div>

      <div class="redaction-tools">
        <div class="auto-redact">
          <h3>ü§ñ Auto-detect sensitive info</h3>
          <p>We'll scan for common patterns. You can undo any detection.</p>
          <div class="auto-redact-options">
            <label class="redact-option">
              <input type="checkbox" id="redactApiKeys" checked>
              <span>API keys & tokens</span>
            </label>
            <label class="redact-option">
              <input type="checkbox" id="redactEmails" checked>
              <span>Email addresses</span>
            </label>
            <label class="redact-option">
              <input type="checkbox" id="redactUrls">
              <span>URLs & domains</span>
            </label>
            <label class="redact-option">
              <input type="checkbox" id="redactPaths" checked>
              <span>File paths with usernames</span>
            </label>
          </div>
          <button class="btn-scan" onclick="autoRedact()">
            <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><circle cx="11" cy="11" r="8"/><path d="m21 21-4.35-4.35"/></svg>
            Scan for Sensitive Data
          </button>
        </div>
      </div>

      <div class="review-preview" id="reviewPreview">
        <!-- Populated by JS -->
      </div>

      <div class="redaction-summary" id="redactionSummary">
        <span class="redaction-count">0 items redacted</span>
        <button class="btn-clear-redactions" onclick="clearRedactions()">Clear All Redactions</button>
      </div>

      <div class="step-actions">
        <button class="btn-secondary" onclick="prevStep()">
          <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><path d="M19 12H5M12 19l-7-7 7-7"/></svg>
          Back
        </button>
        <button class="btn-primary" onclick="nextStep()">
          Looks Good, Continue
          <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><path d="M5 12h14M12 5l7 7-7 7"/></svg>
        </button>
      </div>
    </section>

    <!-- Step 5: Export -->
    <section class="wizard-step" data-step="5">
      <div class="step-header">
        <span class="step-icon">üöÄ</span>
        <h1>Export Your Showcase</h1>
        <p>Add some details and you're ready to share!</p>
      </div>

      <div class="export-form">
        <div class="form-group">
          <label for="showcaseTitle">Showcase Title *</label>
          <input type="text" id="showcaseTitle" placeholder="e.g., Building a SaaS Dashboard from Scratch" required>
        </div>

        <div class="form-group">
          <label for="showcaseDescription">Description *</label>
          <textarea id="showcaseDescription" placeholder="What did you build? What makes this conversation valuable for others to learn from?" required></textarea>
        </div>

        <div class="form-row">
          <div class="form-group">
            <label for="category">Category</label>
            <select id="category">
              <option value="web">Web App</option>
              <option value="automation">Automation</option>
              <option value="design">Design</option>
              <option value="content">Content</option>
              <option value="other">Other</option>
            </select>
          </div>
          <div class="form-group">
            <label for="price">Your Price</label>
            <div class="price-input">
              <span class="currency">$</span>
              <input type="number" id="price" min="0" max="99.99" step="0.01" value="4.99">
            </div>
          </div>
        </div>

        <div class="form-group">
          <label for="creatorName">Your Name / Handle</label>
          <input type="text" id="creatorName" placeholder="How should we credit you?">
        </div>
      </div>

      <div class="export-summary">
        <h3>üìä Export Summary</h3>
        <div class="summary-stats">
          <div class="summary-stat">
            <span class="summary-value" id="summaryMessages">0</span>
            <span class="summary-label">Messages</span>
          </div>
          <div class="summary-stat">
            <span class="summary-value" id="summaryPrompts">0</span>
            <span class="summary-label">Your Prompts</span>
          </div>
          <div class="summary-stat">
            <span class="summary-value" id="summaryRedacted">0</span>
            <span class="summary-label">Redacted</span>
          </div>
        </div>
      </div>

      <div class="export-options">
        <h3>Export As:</h3>
        <div class="export-buttons">
          <button class="export-btn" onclick="downloadJSON()">
            <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
              <path d="M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4"/>
              <polyline points="7 10 12 15 17 10"/>
              <line x1="12" y1="15" x2="12" y2="3"/>
            </svg>
            Download JSON
            <span class="export-note">Save locally first</span>
          </button>
          <button class="export-btn primary" onclick="submitShowcase()">
            <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
              <path d="M22 2L11 13"/>
              <path d="M22 2l-7 20-4-9-9-4 20-7z"/>
            </svg>
            Submit to Gallery
            <span class="export-note">Coming soon</span>
          </button>
        </div>
      </div>

      <div class="step-actions">
        <button class="btn-secondary" onclick="prevStep()">
          <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><path d="M19 12H5M12 19l-7-7 7-7"/></svg>
          Back
        </button>
      </div>
    </section>
  </main>

  <footer class="footer">
    <p>Your data never leaves your browser until you choose to export. <a href="showcases.html">View showcases ‚Üí</a></p>
  </footer>

  <script src="export.js"></script>
</body>
</html>

